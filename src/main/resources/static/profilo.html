<html>
<head>
	<link rel="stylesheet" href="/css/profilo.css">
	<link rel="stylesheet" href="/css/menu.css">
	<link href="css/top.css" rel="stylesheet"/>
	<link rel="stylesheet" href="/css/menu.css">
	<link href="css/cerca.css" rel="stylesheet"/>
	
	<!-- Javascripts -->
	<script src="Javascripts/main.js"></script>
	<script src="database.js"></script>

	<!-- icone di ionicon -->
	<script type="module" src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.esm.js"></script>
	<script nomodule src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.js"></script>
	<!-- Export as PDF -->
	<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/1.4.1/jspdf.debug.js" integrity="sha384-THVO/sM0mFD9h7dfSndI6TS0PgAGavwKvB5hAxRRvc0o9cPLohB0wb/PTA7LdUHs" crossorigin="anonymous"></script>
	
	<script type="text/javascript">if (document.cookie.indexOf('email=') == -1) self.location='login.html';</script>
</head>

<body>
<div class="header-mobile-extended-container" id="header-mobile-extended-container">
    <div class="header-mobile-extended-container1">
      <img src="icon/close_big.png" alt="image" class="header-mobile-extended-image" onclick="close_navbar()"/>
      <div class="header-mobile-extended-container2">
        <img src="/icon/File_dock.png" alt="image" class="menu-noteicon"/>
        <a href="note.html"   style="margin-bottom: 10px;">Note</a>
      </div>
      <div class="header-mobile-extended-container3">
        <img src="/icon/Folder_line.png" alt="image" class="menu-libreriaicon"/>
        <a href="Library.html"   style="margin-bottom: 10px;">Libreria</a>
      </div>
      <div class="header-mobile-extended-container4">
        <img src="/icon/coolicon.png" alt="image" class="menu-cestinoicon" />
         <a href="Trash.html"   style="margin-bottom: 10px;">Cestino </a>
      </div>
      <div class="header-mobile-extended-container5">
        <img src="/icon/User.png" alt="image" class="menu-profiloicon"/>
        <a href="profilo.html"   style="margin-bottom: 10px;">Profilo</a>
      </div>
      <div class="header-mobile-extended-container6">
        <img src="/icon/Sign_out_squre_fill.png" alt="image" class="menu-esciicon"/>
        <a href="esci"   class="esci">Esci</a>
      </div>
    </div>
  </div>
  
<div class="header-mobile-container">
    <div class="header-mobile-container1">
      <div class="header-mobile-hamburgercontainer">
        <img src="/icon/menu_alt_03.png" alt="image" class="header-mobile-hamburgericon" id="hamburger" onclick="open_navbar()"/>
      </div>
      <img src="/icon/Logo_icon.png" alt="image" class="header-mobile-logomobile" onclick="location.href='index.html'"/>
      <div class="header-mobile-rightcontainer">
        <input type="text" placeholder="Cerca ..." class="header-mobile-cercainput input" name="cerca_input_mobile" onchange="location.href='Search.html'"/>
        <img src="/icon/Search_black_alt.png" alt="image" class="header-mobile-cercaiconmobile" onclick="location.href='Search.html'"/>
        <img src="/icon/Send_fill.png" alt="image" class="header-mobile-messaggiiconmobile" onclick="location.href='lista_messaggi.html'"/>
      </div>
    </div>
  </div>
  
 <div class="header-container">
    <div class="header-container1">
      <div class="header-cercacontainer">
        <img src="/icon/Search_black_alt.png" alt="image" class="header-cercaicon" />
        <input type="text" placeholder="Cerca ..." class="header-cercainput" name="cerca_input" onchange="location.href='Search.html'"/>
      </div>
      <img src="/icon/Send_fill.png" alt="image" class="header-messaggiicon" onclick="location.href='lista_messaggi.html'"/>
    </div>
  </div>
  
	<div class="menu-container">
    <div class="menu-container1">
      <div class="menu-logocontainer">
        <img src="/icon/Logo_icon_white.png" alt="image" class="menu-logo" onclick="location.href='index.html'"/>
      </div>
      <div class="menu-middlecontainer">
        <div class="menu-containerprincipallink">
          <div class="menu-containernote">
            <img src="/icon/File_dock.png" alt="image" class="menu-noteicon"/>
            <a href="note.html"  >Note</a>
          </div>
          <div class="menu-containerlibreria">
            <img src="/icon/Folder_line.png" alt="image" class="menu-libreriaicon"/>
            <a href="Library.html"  >Libreria</a>
          </div>
          <div class="menu-containercestino">
            <img src="/icon/coolicon.png" alt="image" class="menu-cestinoicon" />
            <a href="Trash.html"  >Cestino </a>
          </div>
        </div>
      </div>
      <div class="menu-bottomcontainer">
        <div class="menu-containerlink">
          <div class="menu-containerprofilo">
            <img src="/icon/User.png" alt="image" class="menu-profiloicon"/>
            <a href="profilo.html"  >Profilo</a>
          </div>
          <div class="menu-containeresci">
            <img src="/icon/Sign_out_squre_fill.png" alt="image" class="menu-esciicon"/>
            <a href="esci"   class="esci">Esci</a>
          </div>
        </div>
      </div>
    </div>
  </div>
<script src="Javascripts/main.js"></script>
	
	
	<div class="informazioni">
		<div>
  <div class="home-container">
    <div class="home-benvenutoutente">
      <img
        src="icon/ImmagineProfiloPersonale.jpeg"
        alt="image"
        class="home-immagineutente"
      />
      <span>
        <span id="nome_utente_profilo"><b>Buongiorno Utente</b></span>
        <br />
        <span id="data_attuale_profilo"><font color="grey" size="3">00 Gen 00</font></span>
      </span>
    </div>
    <div class="home-informazionipersonali">
      <img
        src="icon/E-mail.png"
        alt="image"
        class="home-iconemail"
      />
      <div class="home-boxemail">
        <span class="home-emailtesto">Email</span>
        <div class="home-emailview">
          <input type="text" class="home-email" disabled="disabled" value="ciao" id="email_utente" placeholder="ciao">
          <img
            src="icon/Eye.png"
            alt="image"
            class="home-vediemail"
            onclick="showEmail()"
          />
        </div>
      </div>
      <img
        src="icon/Lock.png"
        alt="image"
        class="home-iconpassword"
      />
      <div class="home-boxpassword">
        <span class="home-passwordtesto">Password</span>
        <div class="home-passwordview">
          <input type="password" class="home-password" disabled="disabled" value="ciao" id="password_utente"/>
          <img
            src="icon/Eye.png"
            alt="image"
            class="home-vedipassword"
            onclick="showPassword()"
          />
          <img
            src="icon/Edit_fill.png"
            alt="image"
            class="home-modificapassword"
            onclick="editPassword()"
          />
        </div>
      </div>
    </div>
    <div class="home-areapubblicazioni">
      <div class="home-pubblicazionitestobox">
        <span class="home-pubblicazionitesto">Pubblicazioni</span>
        <img
          src="icon/Vector 127.png"
          alt="image"
          class="home-elencopubblicazioniicon"
        />
      </div>
      <div class="note_pubblicate" id="note_pubblicate" ></div>
    </div>
  </div>
</div>
		
	</div>
	
	
	<script>	
	function editPassword(){
		if(document.getElementById("password_utente").getAttribute("disabled") == null){
			document.getElementById("password_utente").setAttribute("disabled", "disabled");
			var xhttp = new XMLHttpRequest();
			xhttp.open("POST","/cambiaPassword?email=" + document.getElementById("email_utente").value + "&password=" + document.getElementById("password_utente").value , true);
			xhttp.send();
		}else{
			document.getElementById("password_utente").removeAttribute("disabled");
			document.getElementById("password_utente").setAttribute("type", "text");
		}
	}
	
	function showPassword(){
		if(document.getElementById("password_utente").getAttribute("type") == "text")
			document.getElementById("password_utente").setAttribute("type", "password");
		else
			document.getElementById("password_utente").setAttribute("type", "text");
	}
	
	function showEmail(){
		if(document.getElementById("email_utente").value.charAt(0) == '*'){
			document.getElementById("email_utente").setAttribute("value", document.getElementById("email_utente").placeholder);
		}else{
			var emailUtente = document.getElementById("email_utente").placeholder.substring(document.getElementById("email_utente").placeholder.indexOf('@'), document.getElementById("email_utente").placeholder.length);
			document.getElementById("email_utente").setAttribute("value", "*****"+emailUtente);
		}
			
	}
	
	getNotePubblicate();
	getDatiUtente();
		var options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
		var today  = new Date();
		document.getElementById("data_attuale_profilo").innerHTML= "<font color='grey' size='3'>"+today.toLocaleDateString("it-IT", options)+"</font>";
	</script>
</body>
</html>